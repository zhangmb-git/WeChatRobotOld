# v1.1 2020-xx-xx

## 功能

- [x] 群自动回答问题，@提问者 -- 菠萝
- [x] 快讯（文本）转发功能。【】符号的文本转发到指定群，通过配置文件控制 “源” 和 “目标”  -- 菠萝
- [x] 图片转发功能。接收指定群内任一用户发送的图片或者文章，转发到指定群。通过配置文件控制 “源” 和 “目标”   -- 菠萝
- [ ] 文章转发功能，转发到指定群。通过配置文件控制 “源” 和 “目标”  -- 青藤
~~- [ ] 答不出来的问题自动反馈到指定群中（答案来自于图灵机器人）。  -- 青藤~~
- [ ] 防封号处理  
  - [ ] 发送消息频率。全局发送频率控制规则整理和实现（参考手机微信@胖猫源码） 
  - [x] 资讯转发频率控制，每2秒4个群，资讯前后需间隔5分钟[可配置]。 -- 菠萝
  - [x] 自动问答限制，2秒处理 -- 青藤
  - [ ] 加群频率摸底
  - [ ] 加好友频率摸底

## 优化

- [x] 观察者模式解耦业务逻辑和API接口逻辑 -- 青藤
- [x] 可以不重启微信，直接启动微信助手 -- 青藤

## Bug fix

### 图片相关

- [x] 图片消息和保存图片映射问题 ，目前msgid没有采集到,而且消息和保存图片为异步，根据消息的有序性使用队列来映射  -- 菠萝
- [x] 1个图片消息对应保存多张图片问题，保存图片时1个图片对应一个消息id ,无法映射到多张图片 -- 菠萝
- [x] 图片保存格式问题，目前保存为jpg -- 菠萝
~~- [x] 发送PNG图片，转发到企业微信是空白 -- 青藤~~

### 企业微信

- [ ] 企业微信取不到昵称 -- 青藤/菠萝
- [x] 企业微信中发一个消息，微信5-15秒之后才收到（微信问题，无法解决）

### 其他

- [x] 超长文本崩溃问题（扩大缓冲区并且做...缩略处理）

## 测试用例

1. 超长答案
   1. 找钢网
   2. 马口铁
   3. 钢铁PM 260+
   4. 无缝钢管 400+
   5. 如何在外观上辨别假冒伪劣钢材 1014+
   6. 金布巴粉JMBF 1126+
   7. 焦炭的产业状况 2598+